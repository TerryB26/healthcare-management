<section>
<!--  <div>-->
<!--    <h2 class="admin-heading">HealthCare Providers</h2>-->
<!--  </div>-->
</section>
<section>
  <div class="text-center">
    <img src="assets/img/patient.png" width="250">
    <div style="margin-bottom: 20px;"><button class="btn btn-primary" type="button" style="width: 250px;" [routerLink]="['/Admin/Create/Patient-Account/']">Add A Patient</button></div>
  </div>
</section>
<section>
  <div class="container">
    <div class="text-center patients-table-div">
      <h4 class="text-center" style="border-style: solid;border-color: rgb(238,238,238);background: rgb(238,238,238);">Available Patients</h4>
      <div class="table-responsive">
        <table class="table table-striped table-hover" style="text-align: center;">
          <thead>
          <tr>
            <th>Name</th>
            <th>Surname</th>
            <th>Email</th>
            <th>Admitted On</th>
            <th>Admitted For</th>
            <th>Current Condition</th>
            <th>Action</th>
          </tr>
          </thead>
          <tbody>
          <tr *ngFor="let patient of patients">
            <td>{{patient.user_name}}</td>
            <td>{{patient.user_surname}}</td>
            <td>{{patient.user_email}}</td>
            <td>{{patient.join_date | date:'medium'}}</td>
            <td>{{patient.admission_reason | slice:0:20}}</td>
            <td>{{patient.condition_name}}</td>
            <td>
              <a  data-bs-target="#SinglePatient" data-bs-toggle="modal" (click)="openModal(patient.user_id)">
                <span class="icon-actions">
                    <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 16 16" class="bi bi-eye text-primary">
                      <path d="M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8M1.173 8a13.133 13.133 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.133 13.133 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5c-2.12 0-3.879-1.168-5.168-2.457A13.134 13.134 0 0 1 1.172 8z"></path>
                      <path d="M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5M4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0"></path>
                    </svg>
                </span>
              </a>
              <span class="icon-actions" (click)="deletePatient({user_id: patient.user_id})">
                  <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 16 16" class="bi bi-trash text-danger">
                    <path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0z"></path>
                    <path d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4zM2.5 3h11V2h-11z"></path>
                  </svg>
                </span>
            </td>
          </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</section>
<section>
  <div class="modal fade" role="dialog" tabindex="-1" id="SinglePatient">
    <div class="modal-dialog modal-xl modal-dialog-centered" role="document">
      <div class="modal-content" *ngFor="let patient of selectedPatient">
        <div class="modal-header">
          <h3 class="display-6 modal-title">Patient - {{patient.user_reference}}</h3><button class="btn-close" type="button" aria-label="Close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <div class="text-center"><img src="assets/img/patientDash.png" width="10%"></div>
          <div>
            <div class="card text-center" >
              <div class="card-body">
                <h4 class="card-title div-form card-heading">{{patient.user_name}} {{patient.user_surname}}</h4>
                <h6 class="text-muted card-subtitle mb-2">{{patient.user_email}}</h6>
                <p class="text-start card-text">ID Number: {{patient.ID_Number}}</p>
                <p class="text-start card-text">Admission Reason: {{patient.admission_reason}}</p>
                <p class="text-start card-text">Admitted On: {{patient.join_date | date:'medium'}}</p>
                <p class="text-start card-text">Current Condition: {{patient.condition_name}} - {{patient.condition_description}}</p>
                <p class="text-start card-text">Placed In: {{patient.ward_name}} - {{patient.ward_description}}</p>
                <h4 class="card-title div-form card-heading">Health Details</h4>
                <p class="text-start card-text">Medical History: {{patient.medical_history}}<br><br></p>
                <p class="text-start card-text">Previous Treatmemt: {{patient.previous_treatment}}<br><br></p>
                <h4 class="card-title div-form card-heading">Residence Details</h4>
                <p class="text-start card-text">Address :&nbsp;&nbsp;{{patient.from_address}}<br>Province:&nbsp;{{patient.from_province}}<br>Town: {{patient.from_town}}<br>Area Code: {{patient.from_area_code}}<br><br></p>
                <h4 class="card-title div-form card-heading">Next Of Kin</h4>
                <p class="text-start card-text">Name And Surname:&nbsp;&nbsp;{{patient.name_surname}}<br>Relationship:&nbsp;{{patient.relationship}}<br>Contact Number: {{patient.contact_number}}<br>Alternative Number: {{patient.alt_contact_number}}<br><br></p>
              </div>
            </div>
          </div>
        </div>
        <div class="modal-footer"><button class="btn btn-light" type="button" data-bs-dismiss="modal">Close</button></div>
      </div>
    </div>
  </div>
</section>
